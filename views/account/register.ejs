<div class="auth-body">
  <section class="auth-container">
    <h1><%= title %></h1>

    <!-- Flash Message -->
    <div><%- messages() %></div>
    <% if (errors) { %>
    <ul class="notice">
      <% errors.array().forEach(error => { %>
      <li><%= error.msg %></li>
      <% }) %>
    </ul>
    <% } %>

    <!-- Registration Form -->
    <form action="/account/register" method="post" class="auth-form">
      <label for="account_firstname">First Name:</label>
      <input
        type="text"
        id="account_firstname"
        name="account_firstname"
        required
        value="<%= locals.account_firstname %>"
      />

      <label for="account_lastname">Last Name:</label>
      <input
        type="text"
        id="account_lastname"
        name="account_lastname"
        required
        value="<%= locals.account_lastname %>"
      />

      <label for="account_email">Email:</label>
      <input
        type="email"
        id="account_email"
        name="account_email"
        placeholder="Enter a valid email address"
        required
        value="<%= locals.account_email %>"
      />

      <label for="account_password">Password:</label>
      <div class="password-wrapper">
        <input
          type="password"
          id="account_password"
          name="account_password"
          required
          pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
        />
        <button type="button" class="toggle-password">Show</button>
      </div>
      <p class="pw-criteria">
        At least 12 chars, 1 capital, 1 number, 1 special char
      </p>
      <button type="submit" class="submit-btn">Register</button>
    </form>

    <p class="footer-text">
      Already have an account? <a href="/account/login">Login</a>
    </p>
  </section>

  <script>
    // Toggle password visibility
    document.addEventListener("DOMContentLoaded", () => {
      const toggleBtn = document.querySelector(".toggle-password");
      const passwordInput = document.getElementById("account_password");

      toggleBtn.addEventListener("click", () => {
        if (passwordInput.type === "password") {
          passwordInput.type = "text";
          toggleBtn.textContent = "Hide";
        } else {
          passwordInput.type = "password";
          toggleBtn.textContent = "Show";
        }
      });
    });
  </script>
</div>
